<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="For each policy alternative, this function calculates:
(i) the percent of simulations in which the threshold is exceeded (or not
met if the threshold is a minimum), (ii) the mean simulation time of the
first exceedance and 95th percentile range, (iii) the mean duration of the
first exceedance and 95th percentile range, and (iv) if the first column of
model output data.frame passed to the function is a Date, the mean date of
the first and last exceedance."><title>Calculate time of threshold exceedance — calculate_time • DUToolkit</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate time of threshold exceedance — calculate_time"><meta property="og:description" content="For each policy alternative, this function calculates:
(i) the percent of simulations in which the threshold is exceeded (or not
met if the threshold is a minimum), (ii) the mean simulation time of the
first exceedance and 95th percentile range, (iii) the mean duration of the
first exceedance and 95th percentile range, and (iv) if the first column of
model output data.frame passed to the function is a Date, the mean date of
the first and last exceedance."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">DUToolkit</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/DUToolkit.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Calculating_Risk.html">Calculating Risk</a>
    <a class="dropdown-item" href="../articles/Fan_Plots.html">Time-outcome fan plots</a>
    <a class="dropdown-item" href="../articles/density_plots.html">Probability density plots with risk shading</a>
    <a class="dropdown-item" href="../articles/rain_plot.html">Raincloud plots</a>
    <a class="dropdown-item" href="../articles/temporal_plot.html">Temporal probability density plots</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Calculate time of threshold exceedance</h1>
      
      <div class="d-none name"><code>calculate_time.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>For each policy alternative, this function calculates:
(i) the percent of simulations in which the threshold is exceeded (or not
met if the threshold is a minimum), (ii) the mean simulation time of the
first exceedance and 95th percentile range, (iii) the mean duration of the
first exceedance and 95th percentile range, and (iv) if the first column of
model output data.frame passed to the function is a Date, the mean date of
the first and last exceedance.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calculate_time</span><span class="op">(</span><span class="va">data</span>, <span class="va">tmin</span>, <span class="va">tmax</span>, <span class="va">Dt</span>, Dt_max <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A list of data.frames (one data.frame for each policy
alternative).</p></dd>


<dt>tmin</dt>
<dd><p>A numeric value or a date specifying the minimum simulation time
to include in the analysis (ex. 1 or "2021-01-01"). This should correspond to a value in the first
column of each data.frame in <code>data</code>.</p></dd>


<dt>tmax</dt>
<dd><p>A numeric value or a date specifying the maximum simulation time to
include in the analysis (ex. 100 or "2021-04-10"). This should correspond to a value in the first
column of each data.frame in <code>data</code>.</p></dd>


<dt>Dt</dt>
<dd><p>A numeric vector of decision thresholds, one for each model
time step between <code>tmin</code> and <code>tmax</code>.</p></dd>


<dt>Dt_max</dt>
<dd><p>A logical value indicating whether the decision threshold
is a maximum (<code>TRUE</code>) or a minimum (<code>FALSE</code>). The default is <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list of data.frames, one for each policy alternative.</p>
    </div>
    <div class="section level2">
    <h2 id="data-format">data format<a class="anchor" aria-label="anchor" href="#data-format"></a></h2>
    

<p>Each data.frame in <code>data</code> contains the results from multiple model
runs using different parameter sets (e.g., from probabilistic sensitivity,
uncertainty, or Bayesian inference analysis). The first column contains
the model time and subsequent columns contain the predicted output for
each simulation run at the respective time.
The model time in the first column must contain numeric values indicating
a simulation time (ex. 1, 2, 3,...) or dates (ex. "2021-01-01", "2021-01-02")
which must be in <code>R</code> Date format (i.e., class="Date"). To ensure a consistent
basis for comparison, the model time in the first column should be the same for
each policy alternative (data.frame).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">tmin</span> <span class="op">&lt;-</span> <span class="st">"2021-01-01"</span></span></span>
<span class="r-in"><span><span class="va">tmax</span> <span class="op">&lt;-</span> <span class="st">"2021-04-10"</span></span></span>
<span class="r-in"><span><span class="va">Dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">750</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">psa_data</span><span class="op">$</span><span class="va">Baseline</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">calculate_time</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">psa_data</span>,</span></span>
<span class="r-in"><span>  tmin <span class="op">=</span> <span class="va">tmin</span>,</span></span>
<span class="r-in"><span>  tmax <span class="op">=</span> <span class="va">tmax</span>,</span></span>
<span class="r-in"><span>  Dt <span class="op">=</span> <span class="va">Dt</span>,</span></span>
<span class="r-in"><span>  Dt_max <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Baseline</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     percent_sims time_first 2.5% 97.5% duration_first 2.5% 97.5% date_first</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> out    0.9532595   22.88516   16    35       25.03484    9    34 2021-01-23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      date_last</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> out 2021-02-17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Intervention_1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     percent_sims time_first 2.5% 97.5% duration_first 2.5% 97.5% date_first</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> out    0.4846248   23.97462   18    33        16.3731    3    28 2021-01-24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      date_last</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> out 2021-02-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Megan Wiggins, Marie Betsy Varughese, Ellen Rafferty, Sasha van Katwyk, Christopher McCabe, Jeff Round, Erin Kirwin, Institute of Health Economics, Canadian Network for Modelling Infectious Diseases .</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

    </footer></div>

  

  

  </body></html>

